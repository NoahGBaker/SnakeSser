[gd_scene load_steps=4 format=3 uid="uid://dx4m8k2eetvl4"]

[ext_resource type="Texture2D" uid="uid://cle4mv627dc4b" path="res://SnakeSser/icon.svg" id="1_4rojq"]

[sub_resource type="GDScript" id="GDScript_y0lfc"]
script/source = "extends CharacterBody2D

var dir_vert=0
var dir_horz=0
const SPEED = 300.0
var curr_pos

var GRID :Array

func _ready():
	for i in range(51):
		GRID.append([])
		for j in range(51):
			GRID[i].append(Vector2(i * 10 + 100, j * 10 + 100))
	position = GRID[3][24]
	curr_pos = GRID[3][24]
	print(curr_pos)
	print(GRID)

#we need a target position which will be set to next pos when we get there
#Also we need always set a next position even while we are moving.
#Also dont use lerp use move_toward()

#Get place for snake to go along a certain sort of grid then set that goal to the previous snake body segment
func _physics_process(delta):
	var next_pos = GRID[3 + dir_horz][24 + dir_vert]
	if Input.is_action_pressed(\"ui_left\"):
		#Left
		dir_horz = -1
		dir_vert = 0
		velocity.x = -1 * SPEED
		velocity.y = 0
		position = curr_pos.move_toward(next_pos, SPEED * delta)
	if Input.is_action_pressed(\"ui_right\"):
		#Right
		dir_horz = 1
		dir_vert = 0
		velocity.x = 1 * SPEED
		velocity.y = 0
		
	if Input.is_action_pressed(\"ui_down\"):
		#Down
		dir_vert = 1
		dir_horz = 0
		velocity.y = 1 * SPEED
		velocity.x = 0
		
	if Input.is_action_pressed(\"ui_up\"):
		#Up
		dir_vert = -1
		dir_horz = 0
		velocity.y = -1 * SPEED
		velocity.x = 0
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ilb8m"]
size = Vector2(95, 89)

[node name="Player" type="CharacterBody2D"]
script = SubResource("GDScript_y0lfc")

[node name="Icon" type="Sprite2D" parent="."]
position = Vector2(37, 32)
scale = Vector2(0.765625, 0.765625)
texture = ExtResource("1_4rojq")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(37.5, 34.5)
shape = SubResource("RectangleShape2D_ilb8m")
